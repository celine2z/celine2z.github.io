<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>포켓몬 타입 상성 계산기</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; margin: 20px; background: #fafafa; }
    h2 { margin-bottom: 15px; font-size: 24px; }
    p { margin: 10px 0 25px; font-size: 16px; }

    /* 타입 버튼 (4열 고정) */
    .type-buttons { 
      display: grid; 
      grid-template-columns: repeat(4, 1fr); 
      gap: 15px; 
      margin-bottom: 25px; 
    }
    .type-btn { 
      display: flex; align-items: center; justify-content: center;
      padding: 12px; border-radius: 12px; cursor: pointer; font-size: 16px; font-weight: bold;
      color: #fff; border: 3px solid transparent; min-height: 60px;
    }
    .selected { border: 4px solid black; }

    /* 결과 박스 */
    .result-box { 
      margin-top: 20px; 
      padding: 20px; 
      border: 3px solid #999; 
      border-radius: 12px; 
      background: #fff; 
      font-size: 18px; 
      text-align: left;
    }

    .strong { color: red; font-weight: bold; }
    .weak { color: blue; }
    .none { color: gray; font-style: italic; }
  </style>
</head>
<body>
  <h2>포켓몬 타입 상성 계산기</h2>
  <p>상대방 타입을 선택하세요 (최대 3개)</p>

  <div class="type-buttons" id="defenderTypes"></div>

  <div class="result-box" id="results">결과가 여기에 표시됩니다</div>

  <script>
    const types = [
      {name:"노말", color:"#A8A77A"},
      {name:"격투", color:"#C22E28"},
      {name:"비행", color:"#A98FF3"},
      {name:"독", color:"#A33EA1"},
      {name:"땅", color:"#E2BF65"},
      {name:"바위", color:"#B6A136"},
      {name:"벌레", color:"#A6B91A"},
      {name:"고스트", color:"#735797"},
      {name:"강철", color:"#B7B7CE"},
      {name:"불꽃", color:"#EE8130"},
      {name:"물", color:"#6390F0"},
      {name:"풀", color:"#7AC74C"},
      {name:"전기", color:"#F7D02C"},
      {name:"에스퍼", color:"#F95587"},
      {name:"얼음", color:"#96D9D6"},
      {name:"드래곤", color:"#6F35FC"},
      {name:"악", color:"#705746"},
      {name:"페어리", color:"#D685AD"}
    ];

    const chart = {
      "노말": {"바위":0.5,"강철":0.5,"고스트":0},
      "격투": {"노말":2,"얼음":2,"바위":2,"악":2,"강철":2,"벌레":0.5,"독":0.5,"비행":0.5,"페어리":0.5,"에스퍼":0.5,"고스트":0},
      "비행": {"풀":2,"격투":2,"벌레":2,"전기":0.5,"바위":0.5,"강철":0.5},
      "독": {"풀":2,"페어리":2,"독":0.5,"땅":0.5,"바위":0.5,"고스트":0.5,"강철":0},
      "땅": {"불꽃":2,"전기":2,"독":2,"바위":2,"강철":2,"벌레":0.5,"풀":0.5,"비행":0},
      "바위": {"불꽃":2,"얼음":2,"비행":2,"벌레":2,"땅":0.5,"강철":0.5,"격투":0.5},
      "벌레": {"풀":2,"악":2,"에스퍼":2,"격투":0.5,"불꽃":0.5,"비행":0.5,"독":0.5,"고스트":0.5,"강철":0.5,"페어리":0.5},
      "고스트": {"에스퍼":2,"고스트":2,"악":0.5,"노말":0},
      "강철": {"얼음":2,"바위":2,"페어리":2,"불꽃":0.5,"물":0.5,"전기":0.5,"강철":0.5},
      "불꽃": {"풀":2,"얼음":2,"벌레":2,"강철":2,"불꽃":0.5,"물":0.5,"바위":0.5,"드래곤":0.5},
      "물": {"불꽃":2,"땅":2,"바위":2,"물":0.5,"풀":0.5,"드래곤":0.5},
      "풀": {"물":2,"땅":2,"바위":2,"풀":0.5,"불꽃":0.5,"독":0.5,"벌레":0.5,"드래곤":0.5,"강철":0.5,"비행":0.5},
      "전기": {"물":2,"비행":2,"풀":0.5,"전기":0.5,"드래곤":0.5,"땅":0},
      "에스퍼": {"격투":2,"독":2,"에스퍼":0.5,"강철":0.5,"악":0},
      "얼음": {"풀":2,"땅":2,"비행":2,"드래곤":2,"불꽃":0.5,"물":0.5,"강철":0.5,"얼음":0.5},
      "드래곤": {"드래곤":2,"강철":0.5,"페어리":0},
      "악": {"에스퍼":2,"고스트":2,"격투":0.5,"악":0.5,"페어리":0.5},
      "페어리": {"격투":2,"드래곤":2,"악":2,"불꽃":0.5,"강철":0.5,"독":0.5}
    };

    let selectedDefenders = [];

    function toggleType(type) {
      const idx = selectedDefenders.indexOf(type);
      if (idx > -1) {
        selectedDefenders.splice(idx,1);
      } else {
        if (selectedDefenders.length < 3) selectedDefenders.push(type);
      }
      renderButtons();
      calculateResults();
    }

    function renderButtons() {
      const container = document.getElementById("defenderTypes");
      container.innerHTML = "";
      types.forEach(t => {
        const btn = document.createElement("div");
        btn.className = "type-btn";
        btn.style.background = t.color;
        if (selectedDefenders.includes(t.name)) btn.classList.add("selected");
        btn.innerText = t.name;
        btn.onclick = () => toggleType(t.name);
        container.appendChild(btn);
      });
    }

    function calculateResults() {
      if (selectedDefenders.length === 0) {
        document.getElementById("results").innerText = "결과가 여기에 표시됩니다";
        return;
      }

      let grouped = {
        "strong": [],
        "weak025": [],
        "weak05": [],
        "none": [],
        "normal": []
      };

      types.forEach(attacker => {
        let multiplier = 1;
        selectedDefenders.forEach(def => {
          const val = chart[attacker.name]?.[def] ?? 1;
          multiplier *= val;
        });

        if (multiplier === 0) grouped.none.push(attacker.name);
        else if (multiplier >= 2) grouped.strong.push(attacker.name + ` (x${multiplier})`);
        else if (multiplier === 0.25) grouped.weak025.push(attacker.name + " (x0.25)");
        else if (multiplier === 0.5) grouped.weak05.push(attacker.name + " (x0.5)");
        else grouped.normal.push(attacker.name + ` (x${multiplier})`);
      });

      let output = `<h3>선택한 속성: ${selectedDefenders.join(", ")}</h3>`;
      if (grouped.strong.length > 0) output += `<p class="strong">효과적인 것: ${grouped.strong.join(", ")}</p>`;
      if (grouped.weak025.length > 0) output += `<p class="weak">거의 효과 없음: ${grouped.weak025.join(", ")}</p>`;
      if (grouped.weak05.length > 0) output += `<p class="weak">별로 효과 없음: ${grouped.weak05.join(", ")}</p>`;
      if (grouped.none.length > 0) output += `<p class="none">효과 없음: ${grouped.none.join(", ")}</p>`;
      if (grouped.normal.length > 0) output += `<p>보통: ${grouped.normal.join(", ")}</p>`;

      document.getElementById("results").innerHTML = output;
    }

    renderButtons();
  </script>
</body>
</html>
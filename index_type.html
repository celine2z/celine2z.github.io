<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>포켓몬 타입 상성 계산기</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; margin: 20px; background: #fafafa; }
    h2 { margin-bottom: 10px; }
    p { margin: 5px 0 20px; }

    /* 타입 버튼 */
    .type-buttons { display: grid; grid-template-columns: repeat(6, 1fr); gap: 10px; margin-bottom: 20px; }
    .type-btn { 
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      padding: 8px; border-radius: 10px; cursor: pointer; font-size: 12px; font-weight: bold;
      color: #fff; border: 2px solid transparent;
    }
    .type-btn img { width: 32px; height: 32px; margin-bottom: 5px; }
    .selected { border: 3px solid black; }

    /* 결과 박스 */
    .result-box { margin-top: 20px; padding: 15px; border: 2px solid #ccc; border-radius: 10px; background: #fff; }
    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: center; }
    th { background: #f0f0f0; }
    .strong { color: red; font-weight: bold; }
    .weak { color: blue; }
    .none { color: gray; font-style: italic; }
  </style>
</head>
<body>
  <h2>포켓몬 타입 상성 계산기</h2>
  <p>상대방 타입을 선택하세요 (최대 3개)</p>

  <div class="type-buttons" id="defenderTypes"></div>

  <div class="result-box" id="results">결과가 여기에 표시됩니다</div>

  <script>
    const types = [
      {name:"노말", color:"#A8A77A", icon:"icons/normal.png"},
      {name:"격투", color:"#C22E28", icon:"icons/fighting.png"},
      {name:"비행", color:"#A98FF3", icon:"icons/flying.png"},
      {name:"독", color:"#A33EA1", icon:"icons/poison.png"},
      {name:"땅", color:"#E2BF65", icon:"icons/ground.png"},
      {name:"바위", color:"#B6A136", icon:"icons/rock.png"},
      {name:"벌레", color:"#A6B91A", icon:"icons/bug.png"},
      {name:"고스트", color:"#735797", icon:"icons/ghost.png"},
      {name:"강철", color:"#B7B7CE", icon:"icons/steel.png"},
      {name:"불꽃", color:"#EE8130", icon:"icons/fire.png"},
      {name:"물", color:"#6390F0", icon:"icons/water.png"},
      {name:"풀", color:"#7AC74C", icon:"icons/grass.png"},
      {name:"전기", color:"#F7D02C", icon:"icons/electric.png"},
      {name:"에스퍼", color:"#F95587", icon:"icons/psychic.png"},
      {name:"얼음", color:"#96D9D6", icon:"icons/ice.png"},
      {name:"드래곤", color:"#6F35FC", icon:"icons/dragon.png"},
      {name:"악", color:"#705746", icon:"icons/dark.png"},
      {name:"페어리", color:"#D685AD", icon:"icons/fairy.png"}
    ];

    const chart = {
      "노말": {"바위":0.5,"강철":0.5,"고스트":0},
      "격투": {"노말":2,"얼음":2,"바위":2,"악":2,"강철":2,"벌레":0.5,"독":0.5,"비행":0.5,"페어리":0.5,"에스퍼":0.5,"고스트":0},
      "비행": {"풀":2,"격투":2,"벌레":2,"전기":0.5,"바위":0.5,"강철":0.5},
      "독": {"풀":2,"페어리":2,"독":0.5,"땅":0.5,"바위":0.5,"고스트":0.5,"강철":0},
      "땅": {"불꽃":2,"전기":2,"독":2,"바위":2,"강철":2,"벌레":0.5,"풀":0.5,"비행":0},
      "바위": {"불꽃":2,"얼음":2,"비행":2,"벌레":2,"땅":0.5,"강철":0.5,"격투":0.5},
      "벌레": {"풀":2,"악":2,"에스퍼":2,"격투":0.5,"불꽃":0.5,"비행":0.5,"독":0.5,"고스트":0.5,"강철":0.5,"페어리":0.5},
      "고스트": {"에스퍼":2,"고스트":2,"악":0.5,"노말":0},
      "강철": {"얼음":2,"바위":2,"페어리":2,"불꽃":0.5,"물":0.5,"전기":0.5,"강철":0.5},
      "불꽃": {"풀":2,"얼음":2,"벌레":2,"강철":2,"불꽃":0.5,"물":0.5,"바위":0.5,"드래곤":0.5},
      "물": {"불꽃":2,"땅":2,"바위":2,"물":0.5,"풀":0.5,"드래곤":0.5},
      "풀": {"물":2,"땅":2,"바위":2,"풀":0.5,"불꽃":0.5,"독":0.5,"벌레":0.5,"드래곤":0.5,"강철":0.5,"비행":0.5},
      "전기": {"물":2,"비행":2,"풀":0.5,"전기":0.5,"드래곤":0.5,"땅":0},
      "에스퍼": {"격투":2,"독":2,"에스퍼":0.5,"강철":0.5,"악":0},
      "얼음": {"풀":2,"땅":2,"비행":2,"드래곤":2,"불꽃":0.5,"물":0.5,"강철":0.5,"얼음":0.5},
      "드래곤": {"드래곤":2,"강철":0.5,"페어리":0},
      "악": {"에스퍼":2,"고스트":2,"격투":0.5,"악":0.5,"페어리":0.5},
      "페어리": {"격투":2,"드래곤":2,"악":2,"불꽃":0.5,"강철":0.5,"독":0.5}
    };

    let selectedDefenders = [];

    function toggleType(type) {
      const idx = selectedDefenders.indexOf(type);
      if (idx > -1) {
        selectedDefenders.splice(idx,1);
      } else {
        if (selectedDefenders.length < 3) selectedDefenders.push(type);
      }
      renderButtons();
      calculateResults();
    }

    function renderButtons() {
      const container = document.getElementById("defenderTypes");
      container.innerHTML = "";
      types.forEach(t => {
        const btn = document.createElement("div");
        btn.className = "type-btn";
        btn.style.background = t.color;
        if (selectedDefenders.includes(t.name)) btn.classList.add("selected");
        btn.innerHTML = `<img src="${t.icon}" alt="${t.name}"><span>${t.name}</span>`;
        btn.onclick = () => toggleType(t.name);
        container.appendChild(btn);
      });
    }

    function calculateResults() {
      if (selectedDefenders.length === 0) {
        document.getElementById("results").innerText = "결과가 여기에 표시됩니다";
        return;
      }
      let output = "<h3>결과</h3><table><tr><th>공격 타입</th><th>효과</th></tr>";
      types.forEach(attacker => {
        let multiplier = 1;
        selectedDefenders.forEach(def => {
          const val = chart[attacker.name]?.[def] ?? 1;
          multiplier *= val;
        });
        if (multiplier === 0) output += `<tr><td>${attacker.name}</td><td class="none">효과가 없다</td></tr>`;
        else if (multiplier >= 4) output += `<tr><td>${attacker.name}</td><td class="strong">효과가 굉장했다! (x${multiplier})</td></tr>`;
        else if (multiplier === 2) output += `<tr><td>${attacker.name}</td><td class="strong">효과적이다 (x2)</td></tr>`;
        else if (multiplier === 0.5) output += `<tr><td>${attacker.name}</td><td class="weak">별로 효과가 없다… (x0.5)</td></tr>`;
        else if (multiplier === 0.25) output += `<tr><td>${attacker.name}</td><td class="weak">거의 효과 없음 (x0.25)</td></tr>`;
        else output += `<tr><td>${attacker.name}</td><td>보통 (x${multiplier})</td></tr>`;
      });
      output += "</table>";
      document.getElementById("results").innerHTML = output;
    }

    renderButtons();
  </script>
</body>
</html>
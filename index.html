<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ÏïΩÎ¨ºÍ≥ÑÏÇ∞Í∏∞</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      padding: 20px;
      max-width: 600px;
      margin: auto;
    }

    h1 {
      text-align: center;
      margin-bottom: 30px;
    }

    .section {
      margin-bottom: 30px;
    }

    .drug-buttons {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
    }

    .drug-button {
      padding: 12px;
      font-size: 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.3s, color 0.3s;
    }

    .blue { background-color: #cce5ff; color: #003366; }
    .blue.selected { background-color: #3399ff; color: white; }

    .pink { background-color: #f8d7da; color: #721c24; }
    .pink.selected { background-color: #c2185b; color: white; }

    .selected-drug {
      font-size: 18px;
      font-weight: bold;
      color: #333;
      margin-top: 10px;
    }

    .weight-input {
      width: 100%;
      padding: 12px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 6px;
      box-sizing: border-box;
    }

    .dose-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 10px;
    }

    .dose-button {
      padding: 10px 16px;
      background-color: #e2f0cb;
      border: none;
      border-radius: 6px;
      font-size: 16px;
      cursor: pointer;
    }

    .dose-button.selected {
      background-color: #76c893;
      color: white;
    }

    .result-box {
      margin-top: 20px;
      padding: 20px;
      background-color: #f7f7f7;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 18px;
      text-align: center;
    }
  </style>
</head>
<body>
  <h1>üíâ ÏïΩÎ¨ºÍ≥ÑÏÇ∞Í∏∞</h1>

  <!-- Ï≤¥Ï§ë ÏûÖÎ†• (Îß® ÏúÑÎ°ú Ïù¥Îèô) -->
  <div class="section">
    <label for="weight">Ï≤¥Ï§ë (kg):</label>
    <input type="number" id="weight" class="weight-input" placeholder="Ïòà: 70">
  </div>

  <!-- ÏïΩÎ¨º ÏÑ†ÌÉù -->
  <div class="section">
    <div class="drug-buttons">
      <button class="drug-button blue" onclick="selectDrug(this, 'Norepinephrine', [5, 10])">Norepi/Epi</button>
      <button class="drug-button blue" onclick="selectDrug(this, 'Phenylephrine', [100])">Phenyl</button>
      <button class="drug-button blue" onclick="selectDrug(this, 'Dopamine/Dobutamine', [2000])">Dopa/Dobu</button>
      <button class="drug-button blue" onclick="selectDrug(this, 'Nitroglycerin', [250])">NTG</button>
      <button class="drug-button pink" onclick="selectDrug(this, 'Remimazolam', [1000, 2000])">Byfavo</button>
      <button class="drug-button pink" onclick="selectDrug(this, 'Precedex', [4])">Precedex</button>
    </div>
    <div class="selected-drug" id="selectedDrug">ÏÑ†ÌÉùÌïú ÏïΩÎ¨º: ÏóÜÏùå</div>
  </div>

  <!-- ÎÜçÎèÑ ÏÑ†ÌÉù -->
  <div class="section" id="concentrationSection" style="display: none;">
    <label>ÎÜçÎèÑ ÏÑ†ÌÉù (mcg/ml ÎòêÎäî mg/ml):</label>
    <div class="dose-buttons" id="concentrationButtons"></div>
  </div>

  <!-- Ïö©Îüâ ÏÑ†ÌÉù -->
  <div class="section" id="doseSection" style="display: none;">
    <label>Ïö©Îüâ ÏÑ†ÌÉù:</label>
    <div class="dose-buttons" id="doseButtons"></div>
  </div>

  <!-- Í≤∞Í≥º -->
  <div class="section">
    <div class="result-box" id="resultBox">Í≥ÑÏÇ∞ Í≤∞Í≥ºÍ∞Ä Ïó¨Í∏∞Ïóê ÌëúÏãúÎê©ÎãàÎã§.</div>
  </div>

  <script>
    let selectedDrug = null;
    let selectedConcentration = null;
    let selectedDose = null;

    function selectDrug(buttonElement, drugName, concentrations) {
      selectedDrug = drugName;
      selectedConcentration = null;
      selectedDose = null;

      document.querySelectorAll('.drug-button').forEach(btn => btn.classList.remove('selected'));
      buttonElement.classList.add('selected');
      document.getElementById('selectedDrug').textContent = 'ÏÑ†ÌÉùÌïú ÏïΩÎ¨º: ' + drugName;

      const concContainer = document.getElementById('concentrationButtons');
      concContainer.innerHTML = '';
      concentrations.forEach(value => {
        const btn = document.createElement('button');
        const unit = drugName.includes('Remimazolam') ? 'mg/ml' : 'mcg/ml';
        btn.textContent = value + ' ' + unit;
        btn.className = 'dose-button';
        btn.onclick = () => {
          document.querySelectorAll('#concentrationButtons .dose-button').forEach(b => b.classList.remove('selected'));
          btn.classList.add('selected');
          selectedConcentration = value;
          generateDoseButtons(drugName);
        };
        concContainer.appendChild(btn);
      });
      document.getElementById('concentrationSection').style.display = 'block';
      document.getElementById('doseSection').style.display = 'none';
    }

    function generateDoseButtons(drugName) {
      const doseContainer = document.getElementById('doseButtons');
      doseContainer.innerHTML = '';
      let doseValues = [];

      if (drugName.includes('Norepi')) {
        for (let i = 1; i <= 10; i++) {
          doseValues.push((i * 0.01).toFixed(2));
        }
      } else if (drugName.includes('Nitro')) {
        doseValues = [0.5, 1, 2];
      } else if (drugName.includes('Phenyl')) {
        for (let i = 1; i <= 10; i++) {
          doseValues.push((i * 0.1).toFixed(1));
        }
      } else if (drugName.includes('Dopamine')) {
        doseValues = [1, 2, 3, 4, 5, 10];
      } else if (drugName.includes('Precedex')) {
        for (let i = 1; i <= 10; i++) {
          doseValues.push((i * 0.1).toFixed(1));
        }
      } else if (drugName.includes('Remimazolam')) {
        doseValues = [6, 7, 8, 9, 10, 11, 12, 1, 2, 0.1, 0.2];
      }

      doseValues.forEach(value => {
        const btn = document.createElement('button');
        btn.textContent = value;
        btn.className = 'dose-button';
        btn.onclick = () => {
          document.querySelectorAll('#doseButtons .dose-button').forEach(b => b.classList.remove('selected'));
          btn.classList.add('selected');
          selectedDose = parseFloat(value);
          calculateResult();
        };
        doseContainer.appendChild(btn);
      });

      document.getElementById('doseSection').style.display = 'block';
    }

    function calculateResult() {
      const weight = parseFloat(document.getElementById('weight').value);
      if (!selectedDrug || !selectedConcentration || !selectedDose || isNaN(weight)) {
        document.getElementById('resultBox').textContent = 'ÏïΩÎ¨º, ÎÜçÎèÑ, Ïö©Îüâ, Ï≤¥Ï§ëÏùÑ Î™®Îëê ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.';
        return;
      }

      let resultText = '';
      if (selectedDrug.includes('Remimazolam')) {
        const totalMgHr = weight * selectedDose;
        const mlHr = totalMgHr / selectedConcentration;
        resultText = mlHr.toFixed(2) + ' ml/hr';
      } else if (selectedDrug.includes('Precedex')) {
        const totalMcgHr = weight * selectedDose;
        const mlHr = totalMcgHr / selectedConcentration;
        resultText = mlHr.toFixed(2) + ' ml/hr';
      } else {
        const totalMcgMin = weight * selectedDose;
        const totalMcgHr = totalMcgMin * 60;
        const mlHr = totalMcgHr / selectedConcentration;
        resultText = mlHr.toFixed(2) + ' ml/hr';
      }

      document.getElementById('resultBox').textContent = resultText;
    }
  </script>
</body>
</html>
